webpackJsonp([1],{pKmP:function(e,t){},vkyI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={name:"home",data:function(){return{loading:!0,tableData:[],options:[{value:.3,label:"30%"},{value:.25,label:"25%"},{value:.2,label:"20%"},{value:.15,label:"15%"},{value:.1,label:"10%"},{value:.05,label:"5%"}],addDialog:!1,addForm:{order:"",name:"",money:"",percent:.3},changeForm:{id:"",order:"",name:"",money:"",percent:""},changeDialog:!1,deleteId:"",deleteDialog:!1,clearDialog:!1,addFormRules:{order:[{required:!0,message:"请输入序号",trigger:"blur"}],money:[{required:!0,validator:function(e,t,a){/^[0-9]+(.[0-9]{2})?$/.test(t)||""==t?a():a(new Error("请输入数字(小数保留两位)"))},trigger:"blur"}]}}},watch:{addDialog:{handler:function(e,t){e||(this.addForm={order:"",name:"",money:"",percent:.3},this.$refs.addForm.resetFields())}}},mounted:function(){var e=this;this.$nextTick(function(){e.get_data()})},methods:{validAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.add()})},validChange:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.change()})},changePercent:function(e){var t=this;console.log(e);var a=""===this.$getlocalStorage("listData")?[]:this.$getlocalStorage("listData");this.tableData=a.map(function(a){return a.id===e.id&&(a.order=e.order,a.name=e.name,a.money=e.money,a.percent=e.percent,a.aftermoney=t.$accMul(a.money,a.percent).toFixed(2)),a}),this.$setlocalStorage("listData",this.tableData)},add:function(){var e=this,t=""===this.$getlocalStorage("listData")?[]:this.$getlocalStorage("listData"),a={id:(new Date).getTime()+"",order:this.addForm.order,name:this.addForm.name,money:this.addForm.money,percent:this.addForm.percent,aftermoney:0};t.push(a),this.$setlocalStorage("listData",t),this.addDialog=!1,this.$message({message:"添加成功",type:"success"}),setTimeout(function(){e.get_data()},1e3)},change:function(){var e=this,t=""===this.$getlocalStorage("listData")?[]:this.$getlocalStorage("listData");t=t.map(function(t){return t.id===e.changeForm.id&&(t.order=e.changeForm.order,t.name=e.changeForm.name,t.money=e.changeForm.money,t.percent=e.changeForm.percent),t}),this.$setlocalStorage("listData",t),this.changeDialog=!1,this.$message({message:"修改成功",type:"success"}),setTimeout(function(){e.get_data()},1e3)},get_data:function(){var e=this;this.loading=!0,this.tableData=[],setTimeout(function(){var t=""===e.$getlocalStorage("listData")?[]:e.$getlocalStorage("listData");e.loading=!1,e.tableData=t.map(function(t){return t.aftermoney=e.$accMul(t.money,t.percent).toFixed(2),t})},100)},handleEdit:function(e){this.changeForm={id:e.id,order:e.order,name:e.name,money:e.money,percent:e.percent},this.changeDialog=!0},handleDelete:function(e){this.deleteId=e.id,this.deleteDialog=!0},sureDelete:function(){var e=this,t=""===this.$getlocalStorage("listData")?[]:this.$getlocalStorage("listData"),a=t.findIndex(function(t){return t.id===e.deleteId});t.splice(a,1),this.$setlocalStorage("listData",t),this.deleteDialog=!1,this.$message({message:"删除成功",type:"success"}),setTimeout(function(){e.get_data()},1e3)},sureClear:function(){var e=this;this.$removelocalStorage("listData"),this.clearDialog=!1,this.$message({message:"清除成功",type:"success"}),setTimeout(function(){e.get_data()},1e3)}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("div",{staticClass:"ub ub-f1 ub-pc ub-ac top-bar",staticStyle:{"font-size":"20px"}},[e._v("\n\t\t\t计算盈利\n\t\t\t")])]),e._v(" "),a("el-main",[a("div",{staticClass:"fly-table-wrapper"},[a("el-row",{staticClass:"event-content",attrs:{type:"flex",align:"middle"}},[a("el-col",{staticClass:"event-btn-col"},[a("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){e.addDialog=!0}}},[e._v("添 加")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(t){e.clearDialog=!0}}},[e._v("清除所有")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"show-summary":"",border:"",data:e.tableData,"header-cell-class-name":"fly-table-title"}},[a("el-table-column",{attrs:{label:"序号",prop:"order"}}),e._v(" "),a("el-table-column",{attrs:{label:"名称",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"收入(元)",prop:"money"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"百分比"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.changePercent(t.row)}},model:{value:t.row.percent,callback:function(a){e.$set(t.row,"percent",a)},expression:"scope.row.percent"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"计算后(元)",prop:"aftermoney"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"primary",circle:"",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.row)}}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[a("el-button",{attrs:{size:"mini",type:"danger",circle:"",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}})],1)]}}])})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加",visible:e.addDialog,width:"50%","custom-class":"match-dialog",center:""},on:{"update:visible":function(t){e.addDialog=t}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"150px"}},[a("el-form-item",{staticClass:"marB20",staticStyle:{width:"70%"},attrs:{label:"序号：",prop:"order",size:"small"}},[a("el-input",{attrs:{clearable:"",placeholder:"序号",autocomplete:"off"},model:{value:e.addForm.order,callback:function(t){e.$set(e.addForm,"order",t)},expression:"addForm.order"}})],1),e._v(" "),a("el-form-item",{staticClass:"marB20",staticStyle:{width:"70%"},attrs:{label:"姓名：",size:"small"}},[a("el-input",{attrs:{clearable:"",placeholder:"姓名",autocomplete:"off"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"marB20",staticStyle:{width:"70%"},attrs:{label:"收入（元）：",prop:"money",size:"small"}},[a("el-input",{attrs:{clearable:"",placeholder:"收入",autocomplete:"off"},model:{value:e.addForm.money,callback:function(t){e.$set(e.addForm,"money",t)},expression:"addForm.money"}})],1),e._v(" "),a("el-form-item",{staticClass:"marB20",staticStyle:{width:"70%"},attrs:{label:"百分比：",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.addForm.percent,callback:function(t){e.$set(e.addForm,"percent",t)},expression:"addForm.percent"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"ub ub-pe dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.validAdd("addForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.changeDialog,width:"50%","custom-class":"match-dialog",center:""},on:{"update:visible":function(t){e.changeDialog=t}}},[a("el-form",{ref:"changeForm",attrs:{model:e.changeForm,rules:e.addFormRules,"label-width":"150px"}},[a("el-form-item",{staticClass:"marB20",staticStyle:{width:"70%"},attrs:{label:"序号：",prop:"order",size:"small"}},[a("el-input",{attrs:{clearable:"",placeholder:"序号",autocomplete:"off"},model:{value:e.changeForm.order,callback:function(t){e.$set(e.changeForm,"order",t)},expression:"changeForm.order"}})],1),e._v(" "),a("el-form-item",{staticClass:"marB20",staticStyle:{width:"70%"},attrs:{label:"姓名：",size:"small"}},[a("el-input",{attrs:{clearable:"",placeholder:"姓名",autocomplete:"off"},model:{value:e.changeForm.name,callback:function(t){e.$set(e.changeForm,"name",t)},expression:"changeForm.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"marB20",staticStyle:{width:"70%"},attrs:{label:"收入（元）：",prop:"money",size:"small"}},[a("el-input",{attrs:{clearable:"",placeholder:"收入",autocomplete:"off"},model:{value:e.changeForm.money,callback:function(t){e.$set(e.changeForm,"money",t)},expression:"changeForm.money"}})],1),e._v(" "),a("el-form-item",{staticClass:"marB20",staticStyle:{width:"70%"},attrs:{label:"百分比：",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.changeForm.percent,callback:function(t){e.$set(e.changeForm,"percent",t)},expression:"changeForm.percent"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"ub ub-pe dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.changeDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.validChange("changeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialog,width:"30%","custom-class":"exit-dialog",center:""},on:{"update:visible":function(t){e.deleteDialog=t}}},[a("span",[e._v("确定删除吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureDelete}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.clearDialog,width:"30%","custom-class":"exit-dialog",center:""},on:{"update:visible":function(t){e.clearDialog=t}}},[a("span",[e._v("确定清除所有吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.clearDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureClear}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var r=a("VU/8")(l,o,!1,function(e){a("pKmP")},"data-v-5c33d3c8",null);t.default=r.exports}});
//# sourceMappingURL=1.6e242b024c2ce87e5cd4.js.map